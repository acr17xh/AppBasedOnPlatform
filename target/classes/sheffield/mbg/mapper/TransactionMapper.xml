<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sheffield.mbg.dao.TransactionMapper">
	<resultMap id="BaseResultMap" type="sheffield.mbg.pojo.Transaction">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 04 
			16:31:14 GMT 2018. -->
		<id column="transactionId" jdbcType="BIGINT" property="transactionid" />
		<result column="transactionDate" jdbcType="VARCHAR" property="transactiondate" />
		<result column="transactionName" jdbcType="VARCHAR" property="transactionname" />
		<result column="userId" jdbcType="BIGINT" property="userid" />
		<result column="commodityId" jdbcType="BIGINT" property="commodityid" />
		<result column="transactionSum" jdbcType="DOUBLE" property="transactionsum" />
		<result column="transactionAmount" jdbcType="DOUBLE" property="transactionamount" />
		<result column="addressId" jdbcType="BIGINT" property="addressid" />
		<result column="transactionStatus" jdbcType="VARCHAR" property="transactionstatus" />
		<result column="transactionDescription" jdbcType="LONGVARCHAR"
			property="transactiondescription" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 04 
			16:31:14 GMT 2018. -->
		delete from transaction
		where transactionId =
		#{transactionid,jdbcType=BIGINT}
	</delete>
	<insert id="insert" parameterType="sheffield.mbg.pojo.Transaction">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 04 
			16:31:14 GMT 2018. -->
		insert into transaction (transactionId, transactionDate,
		transactionName,
		userId, commodityId, transactionSum,
		transactionAmount, addressId, transactionStatus,
		transactionDescription)
		values (#{transactionid,jdbcType=BIGINT},
		#{transactiondate,jdbcType=VARCHAR},
		#{transactionname,jdbcType=VARCHAR},
		#{userid,jdbcType=BIGINT},
		#{commodityid,jdbcType=BIGINT}, #{transactionsum,jdbcType=DOUBLE},
		#{transactionamount,jdbcType=DOUBLE}, #{addressid,jdbcType=BIGINT},
		#{transactionstatus,jdbcType=VARCHAR},
		#{transactiondescription,jdbcType=LONGVARCHAR})
	</insert>
	<update id="updateByPrimaryKey" parameterType="sheffield.mbg.pojo.Transaction">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 04 
			16:31:14 GMT 2018. -->
		update transaction
		set transactionDate =
		#{transactiondate,jdbcType=VARCHAR},
		transactionName =
		#{transactionname,jdbcType=VARCHAR},
		userId =
		#{userid,jdbcType=BIGINT},
		commodityId =
		#{commodityid,jdbcType=BIGINT},
		transactionSum =
		#{transactionsum,jdbcType=DOUBLE},
		transactionAmount =
		#{transactionamount,jdbcType=DOUBLE},
		addressId =
		#{addressid,jdbcType=BIGINT},
		transactionStatus =
		#{transactionstatus,jdbcType=VARCHAR},
		transactionDescription =
		#{transactiondescription,jdbcType=LONGVARCHAR}
		where transactionId =
		#{transactionid,jdbcType=BIGINT}
	</update>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 04 
			16:31:14 GMT 2018. -->
		select transactionId, transactionDate, transactionName, userId,
		commodityId, transactionSum,
		transactionAmount, addressId,
		transactionStatus, transactionDescription
		from transaction
		where
		transactionId = #{transactionid,jdbcType=BIGINT}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 04 
			16:31:14 GMT 2018. -->
		select transactionId, transactionDate, transactionName, userId,
		commodityId, transactionSum,
		transactionAmount, addressId,
		transactionStatus, transactionDescription
		from transaction
	</select>

	<select id="selectByUserIdOrderByTransactionDate" resultMap="BaseResultMap">
		select transactionId, transactionDate, transactionName, userId,
		commodityId, transactionSum,
		transactionAmount, addressId,
		transactionStatus, transactionDescription
		from transaction where
		userId=#{userid,jdbcType=BIGINT} order by
		transactionDate DESC
	</select>

	<select id="selectByCommodityIdOrderByTransactionDate"
		resultMap="BaseResultMap">
		select transactionId, transactionDate, transactionName,
		userId,
		commodityId, transactionSum,
		transactionAmount, addressId,
		transactionStatus, transactionDescription
		from transaction where
		commodityId=#{commodityid,jdbcType=BIGINT} order by
		transactionDate
		DESC
	</select>

	<select id="selectByCommodityOwnerIdOrderByTransactionDate"
		resultMap="BaseResultMap">
		SELECT a.transactionId , a.transactionDate ,
		a.transactionName ,
		a.userId , a.commodityId , a.transactionSum ,
		a.transactionAmount ,
		a.addressId , a.transactionStatus ,
		a.transactionDescription FROM
		TRANSACTION AS a INNER JOIN commodity AS
		b ON a.`commodityId` =b.`commodityId`
		WHERE b.`commodityOwnerId`
		= #{commodityownerid,jdbcType=BIGINT}
		ORDER BY a.transactionDate DESC
	</select>




</mapper>